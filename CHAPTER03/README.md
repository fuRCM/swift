# CHAPTER03 構造体

## 3.1 構造体の定義

### 構造体とは？

値型のデータ

使う用途

- 参照渡しではなく、直接コピーしたい場合
- 小さくて単純なデータをカプセル化したい場合
- 継承が必要ない場合

避けたほうがいい場合

- データが大きい場合
- プロパティが多い場合

参考:http://qiita.com/mini_house/items/22b7b88794b9f8a32381

### 構造体の内容

```
struct 型名 {
	変数/定数定義
	イニシャライザ定義（初期化）
	メソッド定義
	その他の定義
}
```

### 構造体の初期化処理（イニシャライザ）

- 規定イニシャライザ
  - 初期値が全てのプロパティに与えられてる場合
  - 引数なしで呼び出し
- 全項目イニシャライザ
  - 自分でイニシャライザを定義してない場合利用可
  - 引数として全ての項目
- その他イニシャライザを定義
  - 手続き名は「init」
  - オーバーライド可能
  
### 関数とイニシャライザ記法まとめ

|   |イニシャライザ|関数/メソッド|
|:-:|:--:|:--:|
|手続き名|常にinit|自由|
|返り値|記述しない|自由|
|何もしてないときの内部/外部引数の関係|内部引数名は全てが外部引数名に|第一引数は外部引数名使われない 第二引数以降は内部引数名が外部引数名に|

その他、ネストも可能

## 3.2 メソッド

- 関数と呼び出し方はほぼ同じ
- 構造体はデータの値を変更するときに構造体自体を作り変える
- 値を変更するときは「func」の前に「mutating」をつけないとできない
- インスタンスでなくクラスに関数定義（タイプメソッド）は「static」を

### インスタンスメソッドの注意

- プロパティの初期化設定が全て完了してないと使えない
- （クラスでも同様）
- タイプメソッドなら初期化設定を行うことも可能

## 3.3 プロパティ

- 格納型プロパティ
  - 定数や変数が機能を提供するプロパティ
- 計算型プロパティ
  - 値の参照と更新の昨日を手続きで構成するプロパティ
- タイププロパティ
  - すべてのインスタンスが共有するプロパティ
  - staticをつける
  
### 計算型プロパティ

```
var プロパティ名：型　{
	get {
		プロパティの値を返す文
	}
	set ( 仮引数 ) {
		プロパティの値を更新する文
	}
}
```
### タイププロパティ
- イニシャライザからタイプメソッド・タイププロパティを呼ぶとき
  - クラス名.タイプメソッド
  - Hoge.fuga()
  - クラス名.タイププロパティ
  - Hoge.fugaa
- タイプメソッドからタイプメソッド・タイププロパティを呼ぶとき
  - クラス名なしで呼び出し
  - fuga()
- タイププロパティの値の変更には「mutating」は不要


### プロパティオブザーバ
どのタイプでも設定可能

```
var プロパティ名：型 = 初期値 {
	willSet (仮引数) {
		値が変更される直前に呼ばれる文
	}
	didSet(仮引数) {
		値が変更された直後に呼ばれる文
	}
}

```

## 3.4 添字付け

複数個のプロパティがある時、
全体を一つの配列のようにアクセスできる機能

```
struct FoodMenu {
	let menu = [“ざる”,”かけ”,”たぬき”]
	var submenu = [“とろろ”,”天ぷら”,”南蛮”]
}
var menu = FoodMenu()
for i in 0...5 {
	print(menu[i], terminator:” ”)	// ざる かけ たぬき とろろ 天ぷら 南蛮
}

```

## 3.5 プロトコル
CHAPTER10で詳しくあるので
書き方だけ

```
struct 型名：プロトコル名, プロトコル名... {
	各種定義
}

```

## 資料

https://docs.google.com/presentation/d/1u0yxcA5BAA2Qahq4iX6gs2o-h0rjqpHKPh-UPv7N51E/edit?usp=sharing

